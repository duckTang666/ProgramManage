# è§†é¢‘ä¸Šä¼ å¿«é€Ÿä¿®å¤æŒ‡å—

## ğŸš¨ å½“å‰é—®é¢˜
- å°é¢å›¾ç‰‡ä¸Šä¼  âœ… æˆåŠŸ
- è§†é¢‘ä¸Šä¼  âŒ å¤±è´¥ï¼š`Failed to fetch`

## ğŸ”§ å¿«é€Ÿè§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šæ£€æŸ¥å­˜å‚¨æ¡¶ï¼ˆæœ€å¯èƒ½çš„é—®é¢˜ï¼‰
1. æ‰“å¼€ [Supabaseå­˜å‚¨æ§åˆ¶å°](https://supabase.com/dashboard/project/vntvrdkjtfdcnvwgrubo/storage)
2. ç¡®è®¤ `achievement-videos` å­˜å‚¨æ¡¶å­˜åœ¨
3. å¦‚æœä¸å­˜åœ¨ï¼Œç‚¹å‡» "New bucket" åˆ›å»ºï¼š
   - **Bucket name**: `achievement-videos`
   - **Public bucket**: âœ… å‹¾é€‰
   - **File size limit**: `209715200` (200MB)
   - **Allowed MIME types**: `video/mp4,video/webm,video/ogg,video/quicktime`

### æ–¹æ¡ˆ2ï¼šä¿®å¤RLSæƒé™
å¦‚æœå­˜å‚¨æ¡¶å­˜åœ¨ä½†ä»å¤±è´¥ï¼Œåœ¨ [Supabase SQLç¼–è¾‘å™¨](https://supabase.com/dashboard/project/vntvrdkjtfdcnvwgrubo/sql) æ‰§è¡Œï¼š

```sql
-- å…è®¸å…¬å¼€è®¿é—®achievement-videoså­˜å‚¨æ¡¶
CREATE POLICY "Allow public uploads" ON storage.objects
FOR INSERT WITH CHECK (bucket_id = 'achievement-videos');

CREATE POLICY "Allow public reads" ON storage.objects  
FOR SELECT USING (bucket_id = 'achievement-videos');

CREATE POLICY "Allow public updates" ON storage.objects
FOR UPDATE WITH CHECK (bucket_id = 'achievement-videos');
```

### æ–¹æ¡ˆ3ï¼šç½‘ç»œä¼˜åŒ–
å¦‚æœä¸Šè¿°æ–¹æ¡ˆéƒ½æ— æ•ˆï¼Œå°è¯•ï¼š
1. ä½¿ç”¨æ›´å°çš„è§†é¢‘æ–‡ä»¶ï¼ˆ<50MBï¼‰
2. æ£€æŸ¥ç½‘ç»œè¿æ¥ç¨³å®šæ€§
3. å°è¯•ä½¿ç”¨å…¶ä»–ç½‘ç»œæˆ–VPN

## ğŸ› ï¸ è°ƒè¯•å·¥å…·

### ä½¿ç”¨è°ƒè¯•é¡µé¢
æ‰“å¼€ `test-video-upload-debug.html` æ–‡ä»¶ï¼š
1. ç‚¹å‡» "ğŸ” è¿è¡Œç³»ç»Ÿæ£€æŸ¥"
2. ç‚¹å‡» "ğŸ“¦ æ£€æŸ¥å­˜å‚¨æ¡¶" 
3. é€‰æ‹©å°è§†é¢‘æ–‡ä»¶æµ‹è¯•ä¸Šä¼ 
4. æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

### ä½¿ç”¨è°ƒè¯•è„šæœ¬
åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œï¼š
```javascript
// åŠ è½½è°ƒè¯•è„šæœ¬
import('./debug-video-upload.js').then(module => {
  module.default();
});
```

## ğŸ“‹ ä¸Šä¼ å»ºè®®

### æ¨èè§†é¢‘è§„æ ¼ï¼š
- **æ ¼å¼**: MP4 (H.264ç¼–ç )
- **å¤§å°**: < 50MBï¼ˆæ¨èï¼‰ï¼Œ< 100MBï¼ˆæœ€å¤§ï¼‰
- **åˆ†è¾¨ç‡**: 1280x720 (720p) æˆ–æ›´ä½
- **ç ç‡**: 2-5 Mbps
- **æ—¶é•¿**: < 5åˆ†é’Ÿ

### å‹ç¼©å·¥å…·ï¼š
- **HandBrake** (å…è´¹ï¼Œæ¨è)
- **æ ¼å¼å·¥å‚** (Windows)
- **åœ¨çº¿å‹ç¼©**: tinywow.com/video-compressor

## ğŸ¯ å·²å®ç°çš„ä»£ç ä¼˜åŒ–

å·²ä¸º `supabaseStorageService.ts` æ·»åŠ ä»¥ä¸‹ä¼˜åŒ–ï¼š
1. **è‡ªåŠ¨é‡è¯•æœºåˆ¶**ï¼š3æ¬¡é‡è¯•ï¼Œé€’å¢ç­‰å¾…æ—¶é—´
2. **æ™ºèƒ½è¶…æ—¶**ï¼šæ ¹æ®æ–‡ä»¶å¤§å°åŠ¨æ€è®¾ç½®è¶…æ—¶æ—¶é—´
3. **è¯¦ç»†é”™è¯¯è¯Šæ–­**ï¼šæä¾›å…·ä½“çš„è§£å†³å»ºè®®
4. **æ–‡ä»¶é¢„éªŒè¯**ï¼šæ›´å¥½çš„æ ¼å¼å’Œå¤§å°æ£€æŸ¥

## ğŸ†˜ å¦‚æœé—®é¢˜æŒç»­

å¦‚æœä¸Šè¿°æ–¹æ¡ˆéƒ½æ— æ³•è§£å†³ï¼Œè¯·æä¾›ï¼š
1. å®Œæ•´çš„é”™è¯¯ä¿¡æ¯ï¼ˆä»æµè§ˆå™¨æ§åˆ¶å°ï¼‰
2. è§†é¢‘æ–‡ä»¶å¤§å°å’Œæ ¼å¼
3. ç½‘ç»œç¯å¢ƒä¿¡æ¯
4. è°ƒè¯•å·¥å…·çš„è¾“å‡ºç»“æœ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚éœ€æŠ€æœ¯æ”¯æŒï¼Œè¯·ï¼š
1. æ”¶é›†æ‰€æœ‰é”™è¯¯ä¿¡æ¯å’Œæ—¥å¿—
2. è®°å½•å°è¯•è¿‡çš„è§£å†³æ–¹æ¡ˆ
3. æä¾›è§†é¢‘æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯