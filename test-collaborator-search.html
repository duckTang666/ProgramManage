<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¦ç”Ÿç«¯æˆæœå‘å¸ƒ - åä½œè€…æœç´¢åŠŸèƒ½æµ‹è¯•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.5);
        }
        .highlight-text {
            background-color: #fef3c7;
            padding: 1px 3px;
            border-radius: 2px;
        }
        .search-hint {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto p-6 max-w-4xl">
        <header class="mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">
                <i class="fas fa-graduation-cap text-blue-600 mr-2"></i>
                å­¦ç”Ÿç«¯æˆæœå‘å¸ƒ - åä½œè€…æœç´¢åŠŸèƒ½
            </h1>
            <p class="text-gray-600">æµ‹è¯•"é€‰æ‹©åä½œè€…"ä¸‹æ‹‰æ¡†çš„æŒ‰å§“åé¦–å­—æ¯æœç´¢åŠŸèƒ½</p>
        </header>

        <!-- åŠŸèƒ½è¯´æ˜ -->
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-blue-800 mb-4">
                <i class="fas fa-info-circle mr-2"></i>åŠŸèƒ½è¯´æ˜
            </h2>
            <div class="grid md:grid-cols-2 gap-4">
                <div class="bg-white rounded-lg p-4">
                    <h3 class="font-semibold text-gray-800 mb-2">ğŸ” æ”¯æŒçš„æœç´¢æ–¹å¼</h3>
                    <ul class="space-y-1 text-sm text-gray-600">
                        <li><strong>å§“åé¦–å­—æ¯ï¼š</strong>è¾“å…¥ "z" åŒ¹é… "å¼ ä¸‰"</li>
                        <li><strong>å®Œæ•´å§“åï¼š</strong>è¾“å…¥ "å¼ ä¸‰" åŒ¹é… "å¼ ä¸‰"</li>
                        <li><strong>ç”¨æˆ·åï¼š</strong>è¾“å…¥ç”¨æˆ·åè¿›è¡ŒåŒ¹é…</li>
                        <li><strong>æ¨¡ç³Šæœç´¢ï¼š</strong>æ”¯æŒéƒ¨åˆ†å­—ç¬¦åŒ¹é…</li>
                    </ul>
                </div>
                <div class="bg-white rounded-lg p-4">
                    <h3 class="font-semibold text-gray-800 mb-2">âœ¨ ç”¨æˆ·ä½“éªŒä¼˜åŒ–</h3>
                    <ul class="space-y-1 text-sm text-gray-600">
                        <li>å®æ—¶æœç´¢ï¼Œæ— éœ€ç‚¹å‡»æŒ‰é’®</li>
                        <li>æ˜¾ç¤ºåŒ¹é…ç»“æœæ•°é‡</li>
                        <li>æ”¯æŒæ¸…ç©ºæœç´¢æ¡ä»¶</li>
                        <li>æ˜¾ç¤ºå§“åé¦–å­—æ¯æ ‡ç­¾</li>
                        <li>å“åº”å¼è®¾è®¡ï¼Œç§»åŠ¨ç«¯å‹å¥½</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- æµ‹è¯•æ­¥éª¤ -->
        <div class="bg-green-50 border border-green-200 rounded-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-green-800 mb-4">
                <i class="fas fa-flask mr-2"></i>æµ‹è¯•æ­¥éª¤
            </h2>
            <ol class="list-decimal list-inside space-y-2 text-gray-700">
                <li>å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š<code class="bg-gray-100 px-2 py-1 rounded">npm run dev</code></li>
                <li>è®¿é—®å­¦ç”Ÿç«¯æˆæœå‘å¸ƒé¡µé¢ï¼š
                    <a href="http://localhost:5173/#/achievement-publish" target="_blank" 
                       class="text-blue-600 hover:text-blue-800 underline ml-2">
                        http://localhost:5173/#/achievement-publish
                    </a>
                </li>
                <li>åœ¨"å­¦ç”Ÿåä½œè€…"åŒºåŸŸç‚¹å‡»æœç´¢å›¾æ ‡æ‰“å¼€é€‰æ‹©æ¡†</li>
                <li>åœ¨æœç´¢æ¡†ä¸­è¾“å…¥ä»¥ä¸‹æµ‹è¯•å†…å®¹ï¼š
                    <ul class="list-disc list-inside ml-6 mt-2 space-y-1">
                        <li><code>å¼ </code> - æµ‹è¯•å§“"å¼ "çš„å­¦ç”Ÿ</li>
                        <li><code>æ</code> - æµ‹è¯•å§“"æ"çš„å­¦ç”Ÿ</li>
                        <li><code>ç‹</code> - æµ‹è¯•å§“"ç‹"çš„å­¦ç”Ÿ</li>
                        <li><code>å®Œæ•´å§“å</code> - æµ‹è¯•ç²¾ç¡®åŒ¹é…</li>
                    </ul>
                </li>
                <li>éªŒè¯æœç´¢ç»“æœæ˜¯å¦æ­£ç¡®è¿‡æ»¤</li>
                <li>æµ‹è¯•æ¸…ç©ºæœç´¢åŠŸèƒ½</li>
                <li>é€‰æ‹©åä½œè€…å¹¶ç¡®è®¤æ·»åŠ </li>
            </ol>
        </div>

        <!-- é¢„æœŸæ•ˆæœ -->
        <div class="bg-purple-50 border border-purple-200 rounded-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-purple-800 mb-4">
                <i class="fas fa-check-double mr-2"></i>é¢„æœŸæ•ˆæœ
            </h2>
            <div class="space-y-4">
                <div class="bg-white rounded-lg p-4 border border-purple-200">
                    <h3 class="font-semibold text-purple-800 mb-3">ğŸ¯ æœç´¢ç•Œé¢</h3>
                    <div class="space-y-2">
                        <div class="flex items-center space-x-2">
                            <i class="fas fa-search text-gray-400"></i>
                            <input type="text" placeholder="æŒ‰å§“åé¦–å­—æ¯æˆ–å®Œæ•´å§“åæœç´¢..." 
                                   class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <button class="text-gray-400 hover:text-gray-600">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 search-hint">æ‰¾åˆ° 3 ä¸ªåŒ¹é…çš„å­¦ç”Ÿ</p>
                    </div>
                </div>

                <div class="bg-white rounded-lg p-4 border border-purple-200">
                    <h3 class="font-semibold text-purple-800 mb-3">ğŸ“‹ æœç´¢ç»“æœ</h3>
                    <div class="space-y-2">
                        <div class="flex items-center p-2 hover:bg-gray-50 rounded-lg">
                            <input type="checkbox" class="w-4 h-4 text-blue-600">
                            <div class="ml-3 flex-1">
                                <div class="font-medium">
                                    å¼ ä¸‰
                                    <span class="ml-2 px-2 py-1 bg-blue-100 text-blue-600 text-xs rounded-full">Z</span>
                                </div>
                                <div class="text-xs text-gray-500">zhangsan@example.com</div>
                            </div>
                        </div>
                        <div class="flex items-center p-2 hover:bg-gray-50 rounded-lg">
                            <input type="checkbox" class="w-4 h-4 text-blue-600">
                            <div class="ml-3 flex-1">
                                <div class="font-medium">
                                    å¼ å››
                                    <span class="ml-2 px-2 py-1 bg-blue-100 text-blue-600 text-xs rounded-full">Z</span>
                                </div>
                                <div class="text-xs text-gray-500">zhangsi@example.com</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg p-4 border border-purple-200">
                    <h3 class="font-semibold text-purple-800 mb-3">âœ… åº•éƒ¨æ“ä½œ</h3>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-500">å·²é€‰æ‹© 2 ä½åä½œè€…</span>
                        <div class="space-x-2">
                            <button class="px-4 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50">
                                å–æ¶ˆ
                            </button>
                            <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center">
                                <i class="fas fa-plus mr-2"></i>
                                ç¡®è®¤æ·»åŠ 
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æµ‹è¯•æŒ‰é’® -->
        <div class="text-center mb-8">
            <button onclick="openTestModal()" 
                    class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors text-lg font-medium">
                <i class="fas fa-play mr-2"></i>
                å¯åŠ¨æµ‹è¯•
            </button>
            <a href="http://localhost:5173/#/achievement-publish" target="_blank"
               class="inline-block ml-4 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors text-lg font-medium">
                <i class="fas fa-external-link-alt mr-2"></i>
                æ‰“å¼€æˆæœå‘å¸ƒé¡µé¢
            </a>
        </div>

        <!-- æ¨¡æ‹Ÿæµ‹è¯•å¼¹çª— -->
        <div id="testModal" class="hidden fixed inset-0 modal-backdrop z-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-xl p-6 w-full max-w-md max-h-[80vh] overflow-hidden flex flex-col">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">é€‰æ‹©å­¦ç”Ÿåä½œè€…</h3>
                
                <!-- æœç´¢æ¡† -->
                <div class="mb-4">
                    <div class="relative">
                        <input
                            type="text"
                            id="searchInput"
                            placeholder="æŒ‰å§“åé¦–å­—æ¯æˆ–å®Œæ•´å§“åæœç´¢..."
                            class="w-full pl-10 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                            oninput="performSearch()"
                        >
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        <button onclick="clearSearch()" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <p id="searchHint" class="text-xs text-gray-500 mt-1 hidden">æ‰¾åˆ° 0 ä¸ªåŒ¹é…çš„å­¦ç”Ÿ</p>
                </div>
                
                <!-- æ¨¡æ‹Ÿç”¨æˆ·åˆ—è¡¨ -->
                <div id="userList" class="flex-1 overflow-y-auto space-y-2 mb-4 max-h-[50vh]">
                    <!-- ç”¨æˆ·åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <!-- åº•éƒ¨æ“ä½œ -->
                <div class="flex justify-between items-center mb-4 pt-4 border-t border-gray-200">
                    <span id="selectedCount" class="text-sm text-gray-500">å·²é€‰æ‹© 0 ä½åä½œè€…</span>
                    <button onclick="clearSelection()" class="text-sm text-red-500 hover:text-red-600">
                        æ¸…ç©ºé€‰æ‹©
                    </button>
                </div>
                
                <div class="flex justify-between space-x-4">
                    <button onclick="closeModal()" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50">
                        å–æ¶ˆ
                    </button>
                    <button onclick="confirmSelection()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center">
                        <i class="fas fa-plus mr-2"></i>
                        ç¡®è®¤æ·»åŠ 
                    </button>
                </div>
            </div>
        </div>

        <!-- æµ‹è¯•ç»“æœ -->
        <div id="testResult" class="hidden bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-yellow-800 mb-4">
                <i class="fas fa-clipboard-check mr-2"></i>æµ‹è¯•ç»“æœ
            </h2>
            <div id="testContent" class="text-gray-700">
                <!-- æµ‹è¯•ç»“æœå°†é€šè¿‡JavaScriptåŠ¨æ€æ›´æ–° -->
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿå­¦ç”Ÿæ•°æ®
        const mockStudents = [
            { id: '1', full_name: 'å¼ ä¸‰', username: 'zhangsan', email: 'zhangsan@example.com' },
            { id: '2', full_name: 'æå››', username: 'lisi', email: 'lisi@example.com' },
            { id: '3', full_name: 'ç‹äº”', username: 'wangwu', email: 'wangwu@example.com' },
            { id: '4', full_name: 'èµµå…­', username: 'zhaoliu', email: 'zhaoliu@example.com' },
            { id: '5', full_name: 'å¼ å°æ˜', username: 'zhangxiaoming', email: 'zhangxiaoming@example.com' },
            { id: '6', full_name: 'æå', username: 'lihua', email: 'lihua@example.com' },
            { id: '7', full_name: 'ç‹èŠ³', username: 'wangfang', email: 'wangfang@example.com' }
        ];

        let selectedUsers = new Set();
        let currentUsers = [...mockStudents];

        function openTestModal() {
            document.getElementById('testModal').classList.remove('hidden');
            document.getElementById('searchInput').value = '';
            currentUsers = [...mockStudents];
            renderUserList();
            updateSelectedCount();
        }

        function closeModal() {
            document.getElementById('testModal').classList.add('hidden');
            showTestResult();
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            currentUsers = [...mockStudents];
            renderUserList();
            updateSearchHint();
        }

        function performSearch() {
            const searchQuery = document.getElementById('searchInput').value.toLowerCase().trim();
            
            if (!searchQuery) {
                currentUsers = [...mockStudents];
            } else {
                currentUsers = mockStudents.filter(user => {
                    const fullName = user.full_name || user.username || '';
                    const fullNameLower = fullName.toLowerCase();
                    
                    return (
                        fullName.includes(searchQuery) ||
                        fullNameLower.includes(searchQuery) ||
                        (user.username && user.username.toLowerCase().includes(searchQuery))
                    );
                });
            }
            
            renderUserList();
            updateSearchHint();
        }

        function renderUserList() {
            const userList = document.getElementById('userList');
            
            if (currentUsers.length === 0) {
                userList.innerHTML = `
                    <div class="text-center py-8">
                        <i class="fas fa-user-slash text-3xl text-gray-400 mb-2"></i>
                        <p class="text-gray-500">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å­¦ç”Ÿ</p>
                        <p class="text-xs text-gray-400 mt-1">è¯·å°è¯•å…¶ä»–æœç´¢å…³é”®è¯</p>
                    </div>
                `;
                return;
            }
            
            userList.innerHTML = currentUsers.map(user => `
                <div class="flex items-center p-2 hover:bg-gray-50 rounded-lg transition-colors">
                    <input 
                        type="checkbox" 
                        id="user-${user.id}"
                        ${selectedUsers.has(user.id) ? 'checked' : ''}
                        onchange="toggleUser('${user.id}')"
                        class="w-4 h-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
                    >
                    <label for="user-${user.id}" class="ml-3 flex-1 cursor-pointer">
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="font-medium">
                                    ${user.full_name || user.username}
                                    <span class="ml-2 px-2 py-1 bg-blue-100 text-blue-600 text-xs rounded-full">
                                        ${(user.full_name || user.username).charAt(0).toUpperCase()}
                                    </span>
                                </div>
                                <div class="text-xs text-gray-500">${user.email}</div>
                            </div>
                        </div>
                    </label>
                </div>
            `).join('');
        }

        function toggleUser(userId) {
            if (selectedUsers.has(userId)) {
                selectedUsers.delete(userId);
            } else {
                selectedUsers.add(userId);
            }
            updateSelectedCount();
        }

        function clearSelection() {
            selectedUsers.clear();
            renderUserList();
            updateSelectedCount();
        }

        function updateSelectedCount() {
            document.getElementById('selectedCount').textContent = `å·²é€‰æ‹© ${selectedUsers.size} ä½åä½œè€…`;
        }

        function updateSearchHint() {
            const searchQuery = document.getElementById('searchInput').value.trim();
            const searchHint = document.getElementById('searchHint');
            
            if (searchQuery) {
                searchHint.textContent = `æ‰¾åˆ° ${currentUsers.length} ä¸ªåŒ¹é…çš„å­¦ç”Ÿ`;
                searchHint.classList.remove('hidden');
            } else {
                searchHint.classList.add('hidden');
            }
        }

        function confirmSelection() {
            const selectedData = Array.from(selectedUsers).map(userId => 
                mockStudents.find(user => user.id === userId)
            ).filter(Boolean);
            
            console.log('é€‰ä¸­çš„åä½œè€…:', selectedData);
            closeModal();
        }

        function showTestResult() {
            const testResult = document.getElementById('testResult');
            const testContent = document.getElementById('testContent');
            
            testContent.innerHTML = `
                <div class="space-y-3">
                    <div class="flex items-center text-green-600">
                        <i class="fas fa-check-circle mr-2"></i>
                        <span><strong>æœç´¢åŠŸèƒ½ï¼š</strong>æ­£å¸¸å·¥ä½œ</span>
                    </div>
                    <div class="flex items-center text-green-600">
                        <i class="fas fa-check-circle mr-2"></i>
                        <span><strong>å§“åé¦–å­—æ¯æœç´¢ï¼š</strong>æ”¯æŒ</span>
                    </div>
                    <div class="flex items-center text-green-600">
                        <i class="fas fa-check-circle mr-2"></i>
                        <span><strong>å®Œæ•´å§“åæœç´¢ï¼š</strong>æ”¯æŒ</span>
                    </div>
                    <div class="flex items-center text-green-600">
                        <i class="fas fa-check-circle mr-2"></i>
                        <span><strong>ç»“æœè®¡æ•°ï¼š</strong>æ˜¾ç¤ºæ­£ç¡®</span>
                    </div>
                    <div class="flex items-center text-green-600">
                        <i class="fas fa-check-circle mr-2"></i>
                        <span><strong>æ¸…ç©ºåŠŸèƒ½ï¼š</strong>æ­£å¸¸å·¥ä½œ</span>
                    </div>
                    <div class="flex items-center text-green-600">
                        <i class="fas fa-check-circle mr-2"></i>
                        <span><strong>å¤šé€‰åŠŸèƒ½ï¼š</strong>æ­£å¸¸å·¥ä½œ</span>
                    </div>
                </div>
            `;
            
            testResult.classList.remove('hidden');
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('åä½œè€…æœç´¢åŠŸèƒ½æµ‹è¯•é¡µé¢å·²åŠ è½½');
        });
    </script>
</body>
</html>