# åä½œè€…å¤šé€‰åŠŸèƒ½è°ƒè¯•æŒ‡å—

## é—®é¢˜æ’æŸ¥æ­¥éª¤

### 1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
1. è®¿é—® http://localhost:5173/#/project-intro
2. æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·
3. åˆ‡æ¢åˆ°"Console"æ ‡ç­¾é¡µ

### 2. æµ‹è¯•å¤šé€‰åä½œè€…
1. ç‚¹å‡»"å­¦ç”Ÿåä½œè€…"çš„æœç´¢æŒ‰é’®
2. åœ¨å¼¹å‡ºçš„æ¨¡æ€æ¡†ä¸­é€‰æ‹©**å¤šä¸ª**å­¦ç”Ÿï¼ˆè‡³å°‘2-3ä¸ªï¼‰
3. è§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºï¼Œåº”è¯¥çœ‹åˆ°ï¼š
   ```
   ğŸ”§ åˆ‡æ¢åä½œè€…é€‰æ‹©: {userId: "user-uuid", currentSelection: []}
   ğŸ”§ æ›´æ–°åçš„é€‰æ‹©: ["user-uuid"]
   ğŸ”§ åˆ‡æ¢åä½œè€…é€‰æ‹©: {userId: "user-uuid2", currentSelection: ["user-uuid"]}
   ğŸ”§ æ›´æ–°åçš„é€‰æ‹©: ["user-uuid", "user-uuid2"]
   ```
4. ç‚¹å‡»"ç¡®è®¤æ·»åŠ "æŒ‰é’®ï¼Œè§‚å¯Ÿæ§åˆ¶å°ï¼š
   ```
   ğŸ”§ ç¡®è®¤åä½œè€…é€‰æ‹© - æœ€ç»ˆé€‰æ‹©: ["user-uuid", "user-uuid2"]
   ğŸ”§ ç¡®è®¤åä½œè€…é€‰æ‹© - æ•°é‡: 2
   ğŸ”§ ç¡®è®¤åä½œè€…é€‰æ‹© - åŸå§‹æ•°ç»„: ["user-uuid", "user-uuid2"]
   ğŸ”§ åä½œè€…æ•°é‡: 2
   ğŸ”§ æ›´æ–°åçš„è¡¨å•æ•°æ® parents_ids: ["user-uuid", "user-uuid2"]
   ```

### 3. å‘å¸ƒæˆæœæ—¶æ£€æŸ¥
1. å¡«å†™å…¶ä»–å¿…å¡«é¡¹
2. ç‚¹å‡»"å‘å¸ƒ"æŒ‰é’®
3. è§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºï¼Œåº”è¯¥çœ‹åˆ°ï¼š
   ```
   ğŸš€ å‡†å¤‡åˆ›å»ºæˆæœ - åä½œè€…æ•°æ®:
   {
     parents_ids: ["user-uuid", "user-uuid2"],
     collaborator_count: 2,
     collaborator_details: [User1, User2]
   }
   ```

### 4. åç«¯æ’å…¥æ£€æŸ¥
1. åœ¨`addAchievementParents`æ–¹æ³•ä¸­åº”è¯¥çœ‹åˆ°ï¼š
   ```
   ğŸ”— æ·»åŠ åä½œè€…å…³ç³»: { achievementId: "achievement-uuid", parentIds: ["user-uuid", "user-uuid2"] }
   ğŸ“ å‡†å¤‡æ’å…¥achievements_parentsè¡¨çš„æ•°æ®: [
     { achievement_id: "achievement-uuid", parent_id: "user-uuid" },
     { achievement_id: "achievement-uuid", parent_id: "user-uuid2" }
   ]
   âœ… åä½œè€…å…³ç³»æ·»åŠ æˆåŠŸ: [æ’å…¥çš„è®°å½•]
   ```

## å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šåªèƒ½é€‰æ‹©ä¸€ä¸ªåä½œè€…
**ç—‡çŠ¶**ï¼šæ§åˆ¶å°æ˜¾ç¤ºæ•°ç»„é•¿åº¦æ€»æ˜¯1
**åŸå› **ï¼šå¯èƒ½æ˜¯checkboxè¢«è¯¯è®¾ä¸ºradio
**è§£å†³æ–¹æ¡ˆ**ï¼šæ£€æŸ¥inputæ ‡ç­¾ï¼Œç¡®ä¿`type="checkbox"`

### é—®é¢˜2ï¼šé€‰æ‹©è¢«é‡ç½®
**ç—‡çŠ¶**ï¼šæ¯æ¬¡é€‰æ‹©æ–°ç”¨æˆ·æ—¶ï¼Œä¹‹å‰çš„é€‰æ‹©è¢«æ¸…ç©º
**åŸå› **ï¼šå¯èƒ½æ˜¯stateç®¡ç†é—®é¢˜
**è§£å†³æ–¹æ¡ˆ**ï¼šæ£€æŸ¥`tempSelected`çš„æ›´æ–°é€»è¾‘

### é—®é¢˜3ï¼šæ•°æ®æ²¡æœ‰ä¼ é€’åˆ°åç«¯
**ç—‡çŠ¶**ï¼šå‰ç«¯æ˜¾ç¤ºå¤šé€‰ï¼Œä½†æ•°æ®åº“åªæœ‰ä¸€æ¡è®°å½•
**åŸå› **ï¼šå¯èƒ½æ˜¯åç«¯å¤„ç†æ•°ç»„çš„é—®é¢˜
**è§£å†³æ–¹æ¡ˆ**ï¼šæ£€æŸ¥`addAchievementParents`çš„æ‰¹é‡æ’å…¥é€»è¾‘

## æ•°æ®åº“éªŒè¯æŸ¥è¯¢

åœ¨Supabase SQLç¼–è¾‘å™¨æ‰§è¡Œï¼š

```sql
-- æŸ¥çœ‹æœ€æ–°æ’å…¥çš„åä½œè€…å…³ç³»
SELECT 
    id,
    LEFT(achievement_id, 8) || '...' as achievement_id,
    LEFT(parent_id, 8) || '...' as parent_id,
    created_at,
    ROW_NUMBER() OVER (ORDER BY created_at DESC) as insert_order
FROM achievements_parents 
ORDER BY created_at DESC 
LIMIT 10;

-- ç»Ÿè®¡æ¯ä¸ªæˆæœçš„åä½œè€…æ•°é‡
SELECT 
    LEFT(achievement_id, 8) || '...' as achievement_id,
    COUNT(*) as collaborator_count,
    STRING_AGG(LEFT(parent_id, 8) || '...', ', ') as collaborators
FROM achievements_parents 
GROUP BY achievement_id 
ORDER BY MAX(created_at) DESC;

-- æ£€æŸ¥IDè‡ªå¢æ˜¯å¦æ­£å¸¸
SELECT 
    id,
    'ID ' || id || ' - ' || 
    CASE 
        WHEN id = 1 THEN 'ç¬¬ä¸€æ¡è®°å½•'
        WHEN id = LAG(id) OVER (ORDER BY id) + 1 THEN 'æ­£å¸¸é€’å¢'
        ELSE 'è·³è·ƒï¼Œä¸Šä¸€æ¡æ˜¯ ' || COALESCE(LAG(id) OVER (ORDER BY id), 'N/A')
    END as status
FROM achievements_parents 
ORDER BY id DESC 
LIMIT 10;
```

## é¢„æœŸç»“æœ

### æ§åˆ¶å°è¾“å‡ºåº”è¯¥åŒ…å«ï¼š
- âœ… å¤šä¸ªåä½œè€…çš„é€‰æ‹©å’Œå–æ¶ˆ
- âœ… ç¡®è®¤æ—¶æ˜¾ç¤ºæ­£ç¡®çš„æ•°ç»„é•¿åº¦
- âœ… è¡¨å•æ•°æ®æ›´æ–°åŒ…å«å®Œæ•´æ•°ç»„
- âœ… åç«¯æ‰¹é‡æ’å…¥çš„è¯¦ç»†æ—¥å¿—

### æ•°æ®åº“åº”è¯¥æ˜¾ç¤ºï¼š
```sql
id | achievement_id | parent_id    | created_at
---|---------------|--------------|------------
 1 | achievement... | user1-uuid   | 2024-01-01...
 2 | achievement... | user2-uuid   | 2024-01-01...
 3 | achievement... | user3-uuid   | 2024-01-01...
```

## å¦‚æœä»æœ‰é—®é¢˜

å¦‚æœæŒ‰ç…§ä¸Šè¿°æ­¥éª¤è°ƒè¯•åé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ï¼š

1. **æµè§ˆå™¨å…¼å®¹æ€§**ï¼šå°è¯•ä¸åŒçš„æµè§ˆå™¨
2. **ä»£ç ç¼“å­˜**ï¼šæ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶é‡å¯å¼€å‘æœåŠ¡å™¨
3. **æ•°æ®åº“çŠ¶æ€**ï¼šæ‰§è¡Œæ•°æ®åº“ä¿®å¤è„šæœ¬ç¡®ä¿è¡¨ç»“æ„æ­£ç¡®
4. **ç½‘ç»œå»¶è¿Ÿ**ï¼šæ£€æŸ¥æ˜¯å¦æœ‰å¼‚æ­¥æ“ä½œçš„é—®é¢˜

å½“å‰ä»£ç å·²ç»æ”¯æŒå®Œæ•´çš„å¤šé€‰åä½œè€…åŠŸèƒ½ï¼Œæ·»åŠ çš„è°ƒè¯•ä¿¡æ¯å°†å¸®åŠ©å®šä½å…·ä½“é—®é¢˜ã€‚